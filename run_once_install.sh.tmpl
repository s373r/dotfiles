#!/usr/bin/env bash

set -euo pipefail

# NOTE: for gnome-shell-extension-installer
export PATH="${HOME}/.local/bin:${PATH}"

if [[ -n "${DEBUG:-}" ]]; then
  set -x
fi

{{ if ne .chezmoi.os "linux" }}
{{     fail "Only Linux is supported at the moment!" }}
{{ end }}

# Install packages
{{ template "install-packages.tmpl" . }}

{{ if .setup_gnome }}
# Setup GNOME
{{     template "setup-gnome.tmpl" . }}
{{ end }}

{{ if .fix_touchpad_speed }}
# Fix touchpad speed
{{     template "fix-touchpad-speed.tmpl" . }}
{{ end }}

mkdir -p ~/src
ln -s ~/.local/share/chezmoi ~/src/dotfiles

chsh -s $(which zsh)

# TODO: ask about reboot/logout

# zsh
